(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{106:function(e,t,r){e.exports={container:"App_container__2GCnq"}},108:function(e,t,r){e.exports={overlay:"ModalOverlayStyles_overlay__Z2K9b"}},109:function(e,t,r){e.exports={content:"home_content__zpIlI"}},112:function(e,t,r){e.exports={chosenItem:"SortableIngredientStyles_chosenItem__27d4R"}},114:function(e,t,r){e.exports={heading:"ingredients_heading__3OUP9"}},115:function(e,t,r){e.exports={ordersFeed:"ProfileOrdersStyles_ordersFeed__3m4TO"}},116:function(e,t,r){e.exports={orderDetailsPage:"orderDetailsStyles_orderDetailsPage__1cmwQ"}},12:function(e,t,r){e.exports={orderId:"OrderDetailsStyles_orderId__3sLtd",itemName:"OrderDetailsStyles_itemName__10Z_C","order\u0421omposition":"OrderDetailsStyles_order\u0421omposition__R_8F0",orderStatus:"OrderDetailsStyles_orderStatus__3H2KO",orderTotal:"OrderDetailsStyles_orderTotal__vZSay",orderCost:"OrderDetailsStyles_orderCost__2dLup",orderFooter:"OrderDetailsStyles_orderFooter__2eOFN",orderItems:"OrderDetailsStyles_orderItems__aQwSJ",orderItem:"OrderDetailsStyles_orderItem__BybgO",orderItemLeft:"OrderDetailsStyles_orderItemLeft__qTIH8",orderThumbnail:"OrderDetailsStyles_orderThumbnail__3Ks0G"}},125:function(e,t,r){},18:function(e,t,r){e.exports={header:"AppHeader_header__15oz_",headerWrapper:"AppHeader_headerWrapper__2yiDA",menuItems:"AppHeader_menuItems__24M2Z",menuItemSection:"AppHeader_menuItemSection__ej1-8",logoSection:"AppHeader_logoSection__24kH7 AppHeader_menuItemSection__ej1-8",lkSection:"AppHeader_lkSection__2Koyz AppHeader_menuItemSection__ej1-8",menuItem:"AppHeader_menuItem__3CNfi",menuItemActive:"AppHeader_menuItemActive__1aU_y AppHeader_menuItem__3CNfi",menuLkItem:"AppHeader_menuLkItem__2lCt3 AppHeader_menuItem__3CNfi"}},19:function(e,t,r){e.exports={ordersList:"OrdersFeedStyles_ordersList__12NyZ",orderLink:"OrdersFeedStyles_orderLink__DYuQ9",orderTop:"OrdersFeedStyles_orderTop__2Lgbw",orderID:"OrdersFeedStyles_orderID__2GhF2",orderTitle:"OrdersFeedStyles_orderTitle__1kn1k",orderBottom:"OrdersFeedStyles_orderBottom__3rKNG",orderItems:"OrdersFeedStyles_orderItems__3sw-6",orderItem:"OrdersFeedStyles_orderItem__22Mau",orderTotal:"OrdersFeedStyles_orderTotal__2Zu33",orderCost:"OrdersFeedStyles_orderCost__3phCM",orderStatus:"OrdersFeedStyles_orderStatus__ih1XC",done:"OrdersFeedStyles_done__30Z4O",canceled:"OrdersFeedStyles_canceled__3xe8E"}},210:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(38),c=r.n(s),i=(r(125),r(5)),o=r(18),l=r.n(o),d=r(6),u=r(0);var j=function(){return Object(u.jsx)("header",{className:l.a.header,children:Object(u.jsx)("div",{className:l.a.headerWrapper,children:Object(u.jsxs)("nav",{className:l.a.menuItems,children:[Object(u.jsxs)("div",{className:l.a.menuItemSection,children:[Object(u.jsxs)(d.c,{exact:!0,to:"/",className:l.a.menuItem,activeClassName:l.a.menuItemActive,children:[Object(u.jsx)(i.BurgerIcon,{type:"secondary"}),Object(u.jsx)("span",{className:"ml-3",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(u.jsxs)(d.c,{to:"/feed",className:l.a.menuItem,activeClassName:l.a.menuItemActive,children:[Object(u.jsx)(i.ListIcon,{type:"secondary"}),Object(u.jsx)("span",{className:"ml-3",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(u.jsx)("div",{className:l.a.logoSection,children:Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)(i.Logo,{})})}),Object(u.jsx)("div",{className:l.a.lkSection,children:Object(u.jsxs)(d.c,{to:"/profile",className:l.a.menuLkItem,activeClassName:l.a.menuItemActive,children:[Object(u.jsx)(i.ProfileIcon,{type:"secondary"}),Object(u.jsx)("span",{className:"ml-3",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})})},p=r(106),b=r.n(p),m=r(10),O=r(4),f=r(108),_=r.n(f);var h=function(e){var t=e.closeModal,r=Object(m.g)();return Object(u.jsx)("div",{onClick:function(){return t(r)},className:_.a.overlay})},x=r(80),g=r.n(x),v="https://norma.nomoreparties.space/api/orders",y="https://norma.nomoreparties.space/api/auth/user",S=86400,N={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",created:"\u0421\u043e\u0437\u0434\u0430\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"},T=r(24),I=r.n(T),C=r(32),E="ADD_TO_BURGER",k="REMOVE_FROM_BURGER",w="CLEAR_BURGER",R="REORDER_BURGER",W=r(39),D=r(2),P=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},F=function(e,t,r){r=Object(D.a)({path:"/"},r);var n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var a in r){n+="; "+a,n+="="+r[a]}document.cookie=n},q=function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var a=r[n];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},L=function(e){F(e,"",{"max-age":-1})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){L(e)}))},B=function(e,t){var r=null;return e.forEach((function(e){var n=t.find((function(t){return t._id===e}));if("undefined"===typeof n)return!1;null===r&&void 0!==typeof n?r={metaData:Object(W.a)({},e,{amount:1,name:n.name,image:n.image_mobile,price:n.price,id:e}),keys:[e],orderTotal:n.price}:null===r||e in r.metaData?null!==r&&e in r.metaData&&(r.metaData[e].amount+=1,r.orderTotal+=n.price):(r.metaData[e]={amount:1,name:n.name,image:n.image_mobile,price:n.price,id:e},r.keys.push(e),r.orderTotal+=n.price)})),r},U="LOGIN_REQUEST",G="LOGIN_SUCCESS",H="LOGIN_FAIL",M="LOGOUT_REQUEST",z="LOGOUT_SUCCESS",Q="LOGOUT_FAIL",J="REGISTER_REQUEST",Z="REGISTER_SUCCESS",K="REGISTER_FAIL",V="FORGOT_PASSWORD_REQUEST",X="FORGOT_PASSWORD_SUCCESS",Y="FORGOT_PASSWORD_FAIL",$="RESET_PASSWORD_REQUEST",ee="RESET_PASSWORD_SUCCESS",te="RESET_PASSWORD_FAIL",re="GET_USER_REQUEST",ne="GET_USER_SUCCESS",ae="GET_USER_FAIL",se="UPDATE_USER_REQUEST",ce="UPDATE_USER_SUCCESS",ie="UPDATE_USER_FAIL",oe=function(e){return function(){var t=Object(C.a)(I.a.mark((function t(r){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"token="+q("refreshToken")}).then(P).then((function(t){if(!t.success)throw new Error(t.message);F("accessToken",t.accessToken,{"max-age":S}),F("refreshToken",t.refreshToken,{"max-age":S}),r(e)})).catch((function(e){alert(e.message),A(["accessToken","refreshToken"])}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=function e(t){return function(r){return r({type:re}),fetch(y,{method:"GET",headers:{"Content-Type":"application/json",Authorization:q("accessToken")}}).then(P).then((function(e){if(e.success)return r({type:ne,user:Object(D.a)(Object(D.a)({},e.user),{},{password:t})}),!0;throw new Error(e.statusText)})).catch((function(n){"jwt expired"===n.message||"invalid signature"===n.message?r(oe(e(t))):(r({type:ae}),A(["accessToken","refreshToken"]),alert(n.message))}))}},de=function e(t){return function(r){return r({type:se}),fetch(y,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:q("accessToken")},body:JSON.stringify(t)}).then(P).then((function(e){if(e.success)return r({type:ce,user:Object(D.a)(Object(D.a)({},e.user),{},{password:t.password})}),!0;throw new Error(e.statusText)})).catch((function(n){"jwt expired"===n.message||"invalid signature"===n.message?r(oe(e(t))):(r({type:ie}),A(["accessToken","refreshToken"]),alert(n.message))}))}},ue="ORDER_CREATE_REQUEST",je="ORDER_CREATE_SUCCESS",pe="ORDER_CREATE_FAIL",be="ORDER_CLOSE",me=function e(t){return function(){var r=Object(C.a)(I.a.mark((function r(n){var a,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:ue}),r.prev=1,r.next=4,fetch(v,{method:"POST",headers:{"Content-Type":"application/json",Authorization:q("accessToken")},body:JSON.stringify({ingredients:t})});case 4:return a=r.sent,r.next=7,P(a);case 7:if(!(s=r.sent).success){r.next=13;break}n({type:w}),n({type:je,order:s.order}),r.next=14;break;case 13:throw new Error(s.statusText);case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(1),"jwt expired"===r.t0.message||"invalid signature"===r.t0.message?n(oe(e(t))):(n({type:pe}),A(["accessToken","refreshToken"]),alert(r.t0.message));case 19:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e){return r.apply(this,arguments)}}()},Oe=document.getElementById("react-modals");var fe=function(e){var t=e.children,r=e.header,a=Object(O.b)(),s=Object(m.g)(),o=Object(O.c)((function(e){return e.order})).data,l=Object(n.useCallback)((function(e){o?a({type:be}):e.goBack()}),[o,a]);return Object(n.useEffect)((function(){var e=function(e){27===e.keyCode&&l(s)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[a,s,l]),c.a.createPortal(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:g.a.modal,children:[Object(u.jsxs)("div",{className:g.a.headingWrapper,children:[Object(u.jsx)("h2",{className:"text text_type_main-large",children:r}),Object(u.jsx)(i.CloseIcon,{type:"primary",onClick:function(){l(s)}})]}),t]}),Object(u.jsx)(h,{closeModal:l})]}),Oe)},_e=r(81),he=r.n(_e);var xe=function(e){var t=e.details,r=Object(m.i)().id,n=Object(O.c)((function(e){return e.ingredients})).items,a=null!==t&&void 0!==t?t:n.find((function(e){return e._id===r})),s={calories:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",proteins:"\u0411\u0435\u043b\u043a\u0438, \u0433",fat:"\u0416\u0438\u0440\u044b, \u0433",carbohydrates:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"};return a?Object(u.jsxs)("div",{className:he.a.ingredientDetails,children:[Object(u.jsx)("img",{alt:a.name,src:a.image_large}),Object(u.jsx)("h3",{className:"text text_type_main-medium",children:a.name}),Object(u.jsx)("div",{className:he.a.nutritionalValues,children:Object.keys(s).map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:s[e]}),Object(u.jsx)("p",{children:a[e]})]},e)}))})]}):null},ge=r(58),ve=r.n(ge),ye=r.p+"static/media/success.887b83be.gif";function Se(){var e=Object(O.c)((function(e){return e.order})).data;return e?Object(u.jsxs)("div",{className:ve.a.orderDetails,children:[Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"".concat(ve.a.orderId," text text_type_digits-large"),children:e.number})}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"text text_type_main-medium mb-5 mt-5",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"})}),Object(u.jsx)("div",{className:"".concat(ve.a.iconWrapper," mb-5 mt-5"),children:Object(u.jsx)("img",{src:ye,alt:"Success"})}),Object(u.jsxs)("div",{className:"mt-5",children:[Object(u.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(u.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]}):null}var Ne=r(8),Te=r(12),Ie=r.n(Te),Ce=r(45),Ee=r.n(Ce),ke=(r(103),r.p+"static/media/loading.149a7823.gif"),we=r(59),Re=r.n(we),We=function(e){var t=e.request,r=e.fail;return Object(u.jsx)("section",{className:Re.a.section,children:t||!r?Object(u.jsx)("img",{className:Re.a.loadingGif,src:ke,alt:"Loading..."}):Object(u.jsx)("p",{className:Re.a.error,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430."})})},De=r(109),Pe=r.n(De),Fe=r(215),qe=r(117),Le=r(33),Ae=r(40),Be=r.n(Ae),Ue=r(51),Ge=r.n(Ue),He=r(216),Me=function(e){var t,r=e.item,n=Object(m.h)(),a=r._id,s=Object(O.c)((function(e){return e.burger})),c=r._id,o="bun"===r.type&&(null===(t=s.bun)||void 0===t?void 0:t._id)===r._id?2:"bun"!==r.type?s.notBun.filter((function(e){return e._id===r._id})).length:0,l=Object(He.a)({type:"ingredient",item:{itemId:c},collect:function(e){return{isDrag:e.isDragging()}}}),j=Object(Ne.a)(l,2),p=j[0].isDrag,b=j[1];return p?null:Object(u.jsxs)(d.b,{className:Ge.a.listItem,ref:b,to:{pathname:"/ingredients/".concat(a),state:{background:n}},children:[o>0&&Object(u.jsx)(i.Counter,{count:o,size:"default"}),Object(u.jsxs)("div",{className:Ge.a.listItemContent,children:[Object(u.jsx)("img",{src:r.image,alt:r.name}),Object(u.jsxs)("span",{className:Ge.a.listItemPrice,children:[r.price,Object(u.jsx)(i.CurrencyIcon,{type:"primary"})]}),Object(u.jsx)("h3",{className:Ge.a.listItemTitle,children:r.name})]})]})};function ze(){var e=Object(O.c)((function(e){return e.ingredients})).items,t=Object(n.useState)([{id:"bun",name:"\u0411\u0443\u043b\u043a\u0438",active:!0},{id:"sauce",name:"\u0421\u043e\u0443\u0441\u044b",active:!1},{id:"main",name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430",active:!1}]),r=Object(Ne.a)(t,2),a=r[0],s=r[1],c=Object(n.useRef)(null),o=Object(n.useRef)(null),l=Object(n.useRef)(null),d=Object(n.useRef)(null),j=Object(n.useCallback)((function(e){s(Object(Le.a)(a.map((function(t){return t.id===e?Object(D.a)(Object(D.a)({},t),{},{active:!0}):Object(D.a)(Object(D.a)({},t),{},{active:!1})}))))}),[a]);Object(n.useEffect)((function(){var e=c.current,t=function(e){var t,r,n,a=e.currentTarget.scrollTop;(null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.offsetTop)&&(a+=c.current.offsetTop),(null===l||void 0===l||null===(r=l.current)||void 0===r?void 0:r.offsetTop)&&a-l.current.offsetTop>0?j("main"):(null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.offsetTop)&&a-d.current.offsetTop>0?j("sauce"):j("bun")};return null===e||void 0===e||e.addEventListener("scroll",t),function(){null===e||void 0===e||e.removeEventListener("scroll",t)}}),[j]);var p=Object(n.useCallback)((function(e){var t;if(null===o||void 0===o||null===(t=o.current)||void 0===t?void 0:t.offsetTop){var r,n,a,s,i=(null===o||void 0===o||null===(r=o.current)||void 0===r?void 0:r.offsetTop)-10;if("bun"===e.id)null===c||void 0===c||null===(s=c.current)||void 0===s||s.scrollTo(0,0);else if("sauce"===e.id&&(null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.offsetTop)){var u;null===c||void 0===c||null===(u=c.current)||void 0===u||u.scrollTo(0,d.current.offsetTop-i)}else if(null===l||void 0===l||null===(a=l.current)||void 0===a?void 0:a.offsetTop){var j,p;null===c||void 0===c||null===(j=c.current)||void 0===j||j.scrollTo(0,(null===l||void 0===l||null===(p=l.current)||void 0===p?void 0:p.offsetTop)-i)}}}),[]);return Object(u.jsx)("section",{className:Be.a.leftSidebar,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{display:"flex"},children:a.map((function(e,t){return Object(u.jsx)(i.Tab,{value:e.name,active:e.active,onClick:function(){return p(e)},children:e.name},e.id)}))}),Object(u.jsxs)("div",{ref:c,className:Be.a.burgerBuilder,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{ref:o,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(u.jsx)("div",{className:Be.a.list,children:e.filter((function(e){return"bun"===e.type})).map((function(e,t){return Object(u.jsx)(Me,{item:e},e._id)}))})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{ref:d,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(u.jsx)("div",{className:Be.a.list,children:e.filter((function(e){return"sauce"===e.type})).map((function(e,t){return Object(u.jsx)(Me,{item:e},e._id)}))})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{ref:l,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(u.jsx)("div",{className:Be.a.list,children:e.filter((function(e){return"main"===e.type})).map((function(e,t){return Object(u.jsx)(Me,{item:e},e._id)}))})]})]})]})})}var Qe=a.a.memo(ze),Je=r(34),Ze=r.n(Je),Ke=r(217),Ve=r(111),Xe=r.n(Ve),Ye=r(112),$e=r.n(Ye),et=function(e){var t=e.id,r=e.index,a=e.moveCard,s=e.name,c=e.image_mobile,o=e.price,l=Object(n.useRef)(null),d=Object(O.b)(),j=Object(Ke.a)({accept:"helloWorld",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(l.current){var s=e.index,c=r;if(s!==c){var i=null===(n=l.current)||void 0===n?void 0:n.getBoundingClientRect(),o=(i.bottom-i.top)/2,d=t.getClientOffset(),u=i.top;d&&(u=d.y-i.top),s<c&&u<o||s>c&&u>o||(a(s,c),e.index=c)}}}}),p=Object(Ne.a)(j,2),b=p[0].handlerId,m=p[1],f=Object(He.a)({type:"helloWorld",item:function(){return{id:t,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),_=Object(Ne.a)(f,2),h=_[0].isDragging?0:1;return(0,_[1])(m(l)),Object(u.jsxs)("div",{ref:l,style:{opacity:h},"data-handler-id":b,className:$e.a.chosenItem,children:[Object(u.jsx)(i.DragIcon,{type:"primary"}),Object(u.jsx)(i.ConstructorElement,{text:s,price:o,thumbnail:c,handleClose:function(){d({type:k,uniqueId:t})}})]})},tt=r(113);var rt=function(){var e=Object(O.c)((function(e){return e.burger})),t=e.notBun,r=e.bun,a=Object(O.c)((function(e){return e.ingredients})).items,s=Object(m.g)(),c=Object(n.useMemo)((function(){return t.reduce((function(e,t){var r=t.price;return"bun"===t.type&&(r+=t.price),e+r}),0)+(r?2*r.price:0)}),[t,r]),o=Object(O.b)(),l=Object(n.useCallback)((function(e,r){var n=t[e];o({type:R,payload:Xe()(t,{$splice:[[e,1],[r,0,n]]})})}),[t,o]),d=Object(Ke.a)({accept:"ingredient",drop:function(e){o({type:E,item:a.find((function(t){return t._id===e.itemId})),uniqueId:e.itemId+Object(tt.v4)()})},collect:function(e){return{isHover:e.isOver()}}}),j=Object(Ne.a)(d,2),p=j[0].isHover,b=j[1],f=p?"#e3abff":"transparent";return Object(u.jsxs)("section",{className:Ze.a.rightSidebar,children:[Object(u.jsx)("div",{ref:b,className:Ze.a.cart,style:{borderColor:f},children:t.length>0||r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{children:r&&Object(u.jsx)(i.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(r.name," (\u0432\u0435\u0440\u0445)"),price:r.price,thumbnail:r.image_mobile})}),Object(u.jsx)("div",{className:Ze.a.ingredients,children:t.filter((function(e){return"bun"!==e.type})).map((function(e,t){return function(e,t){var r;return Object(u.jsx)(et,{index:t,id:null!==(r=e.uniqueId)&&void 0!==r?r:"",price:e.price,name:e.name,image_mobile:e.image_mobile,moveCard:l},e.uniqueId)}(e,t)}))}),Object(u.jsx)("div",{children:r&&Object(u.jsx)(i.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(r.name," (\u043d\u0438\u0437)"),price:r.price,thumbnail:r.image_mobile})})]}):Object(u.jsx)("div",{className:Ze.a.cartEmpty,children:Object(u.jsx)("p",{children:"\u0422\u044b \u043d\u0435 \u0442\u044b, \u043a\u043e\u0433\u0434\u0430 \u0433\u043e\u043b\u043e\u0434\u0435\u043d..."})})}),Object(u.jsxs)("div",{className:Ze.a.checkout,children:[Object(u.jsxs)("div",{className:Ze.a.total,children:[c," ",Object(u.jsx)(i.CurrencyIcon,{type:"primary"})]}),Object(u.jsx)("div",{children:Object(u.jsx)(i.Button,{onClick:function(){return q("refreshToken")?t&&r?void o(me([].concat(Object(Le.a)(t),[r,r]))):(alert("Choose ingredients!"),!1):(s.push("/login"),!1)},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})},nt=function(){var e=Object(O.c)((function(e){return e.ingredients})),t=e.items,r=e.ingredientsRequest,n=e.ingredientsFailed;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(u.jsx)("main",{className:Pe.a.content,children:Object(u.jsxs)(Fe.a,{backend:qe.a,children:[t.length>0?Object(u.jsx)(Qe,{}):Object(u.jsx)(We,{request:r,fail:n}),Object(u.jsx)(rt,{})]})})]})},at=r(23),st=r.n(at),ct=function(){var e=Object(O.b)(),t=Object(n.useState)(""),r=Object(Ne.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(""),o=Object(Ne.a)(c,2),l=o[0],j=o[1];return Object(u.jsx)("div",{className:st.a.loginWrapper,children:Object(u.jsxs)("div",{className:st.a.loginContent,children:[Object(u.jsx)("p",{className:"text text_type_main-medium ".concat(st.a.formTitle),children:"\u0412\u0445\u043e\u0434"}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a&&l&&e(function(e,t){return function(r){return r({type:U}),fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(P).then((function(e){if(!e.success)throw new Error(e.message);F("accessToken",e.accessToken,{"max-age":S}),F("refreshToken",e.refreshToken,{"max-age":S}),r({type:G,user:Object(D.a)(Object(D.a)({},e.user),{},{password:t})})})).catch((function(e){r({type:H}),alert(e.message)}))}}(a,l))},className:st.a.form,children:[Object(u.jsx)("div",{className:st.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return s(e.target.value)},name:"email",size:"default",value:a})}),Object(u.jsx)("div",{className:st.a.inputWrapper,children:Object(u.jsx)(i.PasswordInput,{name:"password",value:l,onChange:function(e){return j(e.target.value)}})}),Object(u.jsx)("div",{className:st.a.submitWrapper,children:Object(u.jsx)(i.Button,{type:"primary",size:"medium",children:"\u0412\u0445\u043e\u0434"})})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{className:"text text_type_main-default ".concat(st.a.paragraph),children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(u.jsx)(d.b,{className:st.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(u.jsxs)("p",{className:"text text_type_main-default ".concat(st.a.paragraph),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(u.jsx)(d.b,{className:st.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},it=r(25),ot=r.n(it),lt=function(){var e=Object(n.useState)(""),t=Object(Ne.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(""),c=Object(Ne.a)(s,2),o=c[0],l=c[1],j=Object(n.useState)(""),p=Object(Ne.a)(j,2),b=p[0],m=p[1],f=Object(O.b)(),_=Object(n.useCallback)((function(e){e.preventDefault(),f(function(e,t,r){return function(n){return n({type:J}),fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}).then(P).then((function(e){if(!e.success)throw new Error(e.message);F("accessToken",e.accessToken,{"max-age":S}),F("refreshToken",e.refreshToken,{"max-age":S}),n({type:Z,user:Object(D.a)(Object(D.a)({},e.user),{},{password:t})})})).catch((function(e){n({type:K}),alert(e.message)}))}}(o,b,r))}),[f,o,b,r]);return Object(u.jsx)("div",{className:ot.a.loginWrapper,children:Object(u.jsxs)("div",{className:ot.a.loginContent,children:[Object(u.jsx)("p",{className:"text text_type_main-medium ".concat(ot.a.formTitle),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(u.jsxs)("form",{className:ot.a.form,onSubmit:_,children:[Object(u.jsx)("div",{className:ot.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return a(e.target.value)},name:"name",size:"default",value:r})}),Object(u.jsx)("div",{className:ot.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return l(e.target.value)},name:"email",size:"default",value:o})}),Object(u.jsx)("div",{className:ot.a.inputWrapper,children:Object(u.jsx)(i.PasswordInput,{name:"password",value:b,onChange:function(e){return m(e.target.value)}})}),Object(u.jsx)("div",{className:ot.a.submitWrapper,children:Object(u.jsx)(i.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"text text_type_main-default ".concat(ot.a.paragraph),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(u.jsx)(d.b,{className:ot.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},dt=r(27),ut=r.n(dt),jt=function(){var e=Object(n.useState)(""),t=Object(Ne.a)(e,2),r=t[0],a=t[1],s=Object(O.b)(),c=Object(n.useCallback)((function(e){e.preventDefault(),r&&s(function(e){return function(t){return t({type:V}),fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(P).then((function(e){if(!e.success)throw new Error(e.message);t({type:X})})).catch((function(e){t({type:Y}),alert(e.message)}))}}(r))}),[s,r]);return Object(u.jsx)("div",{className:ut.a.loginWrapper,children:Object(u.jsxs)("div",{className:ut.a.loginContent,children:[Object(u.jsx)("p",{className:"text text_type_main-medium ".concat(ut.a.formTitle),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(u.jsxs)("form",{onSubmit:c,className:ut.a.form,children:[Object(u.jsx)("div",{className:ut.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return a(e.target.value)},name:"email",size:"default",value:r})}),Object(u.jsx)("div",{className:ut.a.submitWrapper,children:Object(u.jsx)(i.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"text text_type_main-default ".concat(ut.a.paragraph),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(u.jsx)(d.b,{className:ut.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},pt=r(26),bt=r.n(pt),mt=function(){var e=Object(n.useState)(""),t=Object(Ne.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(""),c=Object(Ne.a)(s,2),o=c[0],l=c[1],j=Object(O.b)(),p=Object(O.c)((function(e){return e.user})),b=Object(n.useCallback)((function(e){e.preventDefault(),o&&r&&j(function(e,t){return function(r){return r({type:$}),fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then(P).then((function(e){if(!e.success)throw new Error(e.message);r({type:ee})})).catch((function(e){r({type:te}),alert(e.message)}))}}(r,o))}),[r,o,j]);return p.resetPassword.success?Object(u.jsx)(m.a,{to:{pathname:"/login"}}):Object(u.jsx)("div",{className:bt.a.loginWrapper,children:Object(u.jsxs)("div",{className:bt.a.loginContent,children:[Object(u.jsx)("p",{className:"text text_type_main-medium ".concat(bt.a.formTitle),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(u.jsxs)("form",{onSubmit:b,className:bt.a.form,children:[Object(u.jsx)("div",{className:bt.a.inputWrapper,children:Object(u.jsx)(i.PasswordInput,{name:"password",value:r,onChange:function(e){return a(e.target.value)}})}),Object(u.jsx)("div",{className:bt.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return l(e.target.value)},name:"code",size:"default",value:o})}),Object(u.jsx)("div",{className:bt.a.submitWrapper,children:Object(u.jsx)(i.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"text text_type_main-default ".concat(bt.a.paragraph),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(u.jsx)(d.b,{className:bt.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},Ot=r(84),ft=r.n(Ot),_t=r.p+"static/media/404.41d92f7c.gif",ht=function(){return Object(u.jsxs)("div",{className:ft.a.content,children:[Object(u.jsx)("p",{className:"text text_type_main-large ".concat(ft.a.paragraph),children:"\u0422\u0443\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442..."}),Object(u.jsx)("img",{src:_t,alt:"Page not found"})]})},xt=r(114),gt=r.n(xt),vt=function(){var e,t=Object(O.c)((function(e){return e.ingredients})),r=t.items,n=t.ingredientsRequest,a=t.ingredientsFailed,s=Object(m.i)().id,c=r.length>0&&null!==(e=r.find((function(e){return e._id===s})))&&void 0!==e?e:null;return c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"text text_type_main-large ".concat(gt.a.heading),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(u.jsx)(xe,{details:c})]}):n?Object(u.jsx)(We,{request:n,fail:a}):Object(u.jsx)(ht,{})},yt=r(41),St=r.n(yt),Nt=r(30),Tt=r.n(Nt);function It(){var e=Object(O.b)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("ul",{className:Tt.a.profileMenu,children:[Object(u.jsx)("li",{className:"pt-3 pb-3",children:Object(u.jsx)(d.c,{exact:!0,to:"/profile",className:"text text_type_main-medium ".concat(Tt.a.profileLink),activeClassName:Tt.a.profileLinkActive,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(u.jsx)("li",{className:"pt-3 pb-3",children:Object(u.jsx)(d.c,{exact:!0,to:"/profile/orders",className:"text text_type_main-medium ".concat(Tt.a.profileLink),activeClassName:Tt.a.profileLinkActive,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(u.jsx)("li",{className:"pt-3 pb-3",children:Object(u.jsx)(d.b,{to:"#logout",onClick:function(t){t.preventDefault(),e((function(e){return e({type:M}),fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:q("refreshToken")})}).then(P).then(function(){var t=Object(C.a)(I.a.mark((function t(r){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.success){t.next=6;break}L("accessToken"),L("refreshToken"),e({type:z}),t.next=7;break;case 6:throw new Error(r.message);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e({type:Q}),alert(t.message)}))}))},className:"text text_type_main-medium ".concat(Tt.a.profileLink),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(u.jsx)("p",{className:"text text_type_main-default ".concat(Tt.a.info),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})}var Ct=r(28),Et=r.n(Ct);function kt(){var e,t,r,a=Object(O.c)((function(e){return e.user})),s=a.data,c=a.getUserRequest,o=Object(m.g)(),l={name:null!==(e=null===s||void 0===s?void 0:s.name)&&void 0!==e?e:"",email:null!==(t=null===s||void 0===s?void 0:s.email)&&void 0!==t?t:"",password:null!==(r=null===s||void 0===s?void 0:s.password)&&void 0!==r?r:""},d=Object(n.useState)(l),j=Object(Ne.a)(d,2),p=j[0],b=j[1],f=Object(O.b)();Object(n.useEffect)((function(){null===s&&function(){var e=Object(C.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(le(null===s||void 0===s?void 0:s.password));case 2:c.failed&&o.replace({pathname:"/login"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[f,o,s,null===s||void 0===s?void 0:s.password,c.failed]),Object(n.useEffect)((function(){var e,t,r;b({name:null!==(e=null===s||void 0===s?void 0:s.name)&&void 0!==e?e:"",email:null!==(t=null===s||void 0===s?void 0:s.email)&&void 0!==t?t:"",password:null!==(r=null===s||void 0===s?void 0:s.password)&&void 0!==r?r:""})}),[null===s||void 0===s?void 0:s.name,null===s||void 0===s?void 0:s.email,null===s||void 0===s?void 0:s.password]);var _=function(e){var t=e.currentTarget.value,r=e.currentTarget.name;b(Object(D.a)(Object(D.a)({},p),{},Object(W.a)({},r,t)))};return Object(u.jsxs)("div",{className:Et.a.sidesWrapper,children:[Object(u.jsx)("div",{className:Et.a.leftSide,children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(de(p))},children:[Object(u.jsx)("div",{className:Et.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:_,name:"name",size:"default",value:p.name,icon:"EditIcon"})}),Object(u.jsx)("div",{className:Et.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"email",placeholder:"E-mail",onChange:_,name:"email",size:"default",value:p.email,icon:"EditIcon"})}),Object(u.jsx)("div",{className:Et.a.inputWrapper,children:Object(u.jsx)(i.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:_,name:"password",size:"default",value:p.password,icon:"EditIcon"})}),Object(u.jsxs)("div",{className:Et.a.submitWrapper,children:[Object(u.jsx)("a",{href:"#cancel",className:Et.a.link,onClick:function(e){e.preventDefault(),b(l)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(u.jsx)(i.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})}),Object(u.jsx)("div",{className:Et.a.rightSide})]})}var wt=r(19),Rt=r.n(wt),Wt=function(){var e=Object(m.h)(),t=Object(m.j)().path,r=Object(O.c)((function(e){return e.websocket})),n=r.orders,a=r.wsConnected,s=r.error,c=Object(O.c)((function(e){return e.ingredients})),o=c.items,l=c.ingredientsRequest,j=c.ingredientsFailed;return n&&o?Object(u.jsx)("ul",{className:Rt.a.ordersList,children:n&&n.map((function(r){var n;if(r.ingredients.length<1||r.ingredients.some((function(e){return null===e})))return null;var a=B(r.ingredients,o);return Object(u.jsx)("li",{children:Object(u.jsxs)(d.b,{className:Rt.a.orderLink,to:{pathname:"".concat(t,"/").concat(r.number),state:{background:e}},children:[Object(u.jsxs)("div",{className:Rt.a.orderTop,children:[Object(u.jsxs)("span",{className:Rt.a.orderID,children:["#",r.number]}),Object(u.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:[Ee()(r.createdAt).locale("ru").calendar()," i-GMT+3"]})]}),"/profile/orders"===t&&Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"text text_type_main-default ".concat(Rt.a.orderStatus," ").concat(Rt.a[r.status]),children:N[r.status]})}),Object(u.jsx)("div",{className:"text text_type_main-medium ".concat(Rt.a.orderTitle),children:Object(u.jsx)("h3",{children:null!==(n=r.name)&&void 0!==n?n:""})}),Object(u.jsxs)("div",{className:Rt.a.orderBottom,children:[Object(u.jsx)("div",{className:Rt.a.orderItems,children:a&&a.keys.map((function(e){if(!e)return null;var t=a.metaData[e];return Object(u.jsxs)("div",{className:Rt.a.orderItem,children:[Object(u.jsx)("img",{src:t.image,alt:t.name}),t.amount>1&&Object(u.jsxs)("span",{className:"text text_type_main-default",children:["+",t.amount]})]},r._id+t.id)}))}),Object(u.jsxs)("div",{className:Rt.a.orderTotal,children:[Object(u.jsx)("span",{className:Rt.a.orderCost,children:null===a||void 0===a?void 0:a.orderTotal})," ",Object(u.jsx)(i.CurrencyIcon,{type:"primary"})]})]})]})},r._id)}))}):Object(u.jsx)(We,{fail:!(!j&&!s),request:l||!a})},Dt=r(115),Pt=r.n(Dt),Ft="WS_CONNECTION_START",qt="WS_CONNECTION_SUCCESS",Lt="WS_CONNECTION_ERROR",At="WS_CONNECTION_FINISH",Bt="WS_CONNECTION_CLOSED",Ut="WS_GET_ORDERS";function Gt(){var e=Object(O.b)();return Object(n.useEffect)((function(){return e({type:Ft,payload:{url:"wss://norma.nomoreparties.space/orders",secure:!0}}),function(){e({type:At,payload:1e3})}}),[e]),Object(u.jsx)("section",{className:Pt.a.ordersFeed,children:Object(u.jsx)(Wt,{})})}var Ht=function(){return Object(u.jsxs)("div",{className:St.a.content,children:[Object(u.jsx)("div",{className:"".concat(St.a.column," ").concat(St.a.sidebar),children:Object(u.jsx)(It,{})}),Object(u.jsx)("div",{className:"".concat(St.a.column," ").concat(St.a.centerBlock),children:Object(u.jsxs)(m.d,{children:[Object(u.jsx)(m.b,{path:"/profile",exact:!0,children:Object(u.jsx)(kt,{})}),Object(u.jsx)(m.b,{path:"/profile/orders",exact:!0,children:Object(u.jsx)(Gt,{})}),Object(u.jsx)(m.b,{children:Object(u.jsx)(m.a,{to:{pathname:"/"}})})]})})]})},Mt=r(85),zt=r.n(Mt),Qt=r(35),Jt=r.n(Qt);function Zt(){var e=Object(O.c)((function(e){return e.websocket})),t=e.orders,r=e.total,n=e.totalToday;return t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:Jt.a.ordersTable,children:[Object(u.jsxs)("div",{className:Jt.a.completedOrders,children:[Object(u.jsx)("h4",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(u.jsx)("ul",{className:Jt.a.orderIds,children:t.filter((function(e,t){return t<10})).map((function(e){return"done"===e.status?Object(u.jsx)("li",{children:e.number},e.number):null}))})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(u.jsx)("ul",{className:Jt.a.orderIds,children:t.filter((function(e,t){return t<10})).map((function(e){return"pending"===e.status||"created"===e.status?Object(u.jsx)("li",{children:e.number},e.number):null}))})]})]}),Object(u.jsxs)("div",{className:Jt.a.ordersTotals,children:[Object(u.jsx)("h4",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(u.jsx)("p",{className:"text text_type_digits-large",children:r})]}),Object(u.jsxs)("div",{className:Jt.a.ordersTotals,children:[Object(u.jsx)("h4",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(u.jsx)("p",{className:"text text_type_digits-large",children:n})]})]})}var Kt=function(){var e=Object(O.b)();return Object(n.useEffect)((function(){return e({type:Ft,payload:{url:"wss://norma.nomoreparties.space/orders/all",secure:!1}}),function(){e({type:At,payload:1e3})}}),[e]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(u.jsxs)("main",{className:zt.a.content,children:[Object(u.jsx)("section",{className:zt.a.ordersFeed,children:Object(u.jsx)(Wt,{})}),Object(u.jsx)("section",{children:Object(u.jsx)(Zt,{})})]})]})},Vt=r(116),Xt=r.n(Vt),Yt=function(){return Object(u.jsx)("main",{className:Xt.a.orderDetailsPage,children:Object(u.jsx)("section",{children:Object(u.jsx)($t,{})})})},$t=function(){var e=Object(m.i)().id,t=Object(O.c)((function(e){return e.ingredients})).items,r=Object(n.useState)(null),a=Object(Ne.a)(r,2),s=a[0],c=a[1],o=Object(n.useState)(null),l=Object(Ne.a)(o,2),d=l[0],j=l[1],p=Object(n.useState)(null),b=Object(Ne.a)(p,2),f=b[0],_=b[1];return Object(n.useEffect)((function(){s?s&&t.length>0&&j(B(s.ingredients,t)):fetch("".concat(v,"/").concat(e)).then(P).then((function(e){if(!e.success)throw new Error(e.message);e.orders.length>0?c(e.orders[0]):_("\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d...")})).catch((function(e){_(e.message),alert(e.message)}))}),[t,s,e]),Object(u.jsxs)("div",{className:Ie.a.orderDetails,children:[Object(u.jsxs)("p",{className:Ie.a.orderId,children:["#",e]}),s&&d?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"text text_type_main-medium ".concat(Ie.a.itemName),children:s.name}),Object(u.jsx)("p",{className:"text text_type_main-default ".concat(Ie.a.orderStatus),children:N[s.status]}),Object(u.jsx)("p",{className:"text text_type_main-medium ".concat(Ie.a.order\u0421omposition),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(u.jsx)("ul",{className:Ie.a.orderItems,children:d.keys.map((function(e){var t=d.metaData[e];return Object(u.jsxs)("li",{className:Ie.a.orderItem,children:[Object(u.jsxs)("div",{className:Ie.a.orderItemLeft,children:[Object(u.jsx)("div",{className:Ie.a.orderThumbnail,children:Object(u.jsx)("img",{src:t.image,alt:t.name})}),Object(u.jsx)("p",{className:"text text_type_main-default",children:t.name})]}),Object(u.jsxs)("p",{className:Ie.a.orderTotal,children:[Object(u.jsxs)("span",{className:Ie.a.orderCost,children:[t.amount," x ",t.price]}),Object(u.jsx)(i.CurrencyIcon,{type:"primary"})]})]},t.id)}))}),Object(u.jsxs)("div",{className:Ie.a.orderFooter,children:[Object(u.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:Ee()(s.createdAt).locale("ru").calendar()}),Object(u.jsxs)("p",{className:Ie.a.orderTotal,children:[Object(u.jsx)("span",{className:Ie.a.orderCost,children:d.orderTotal}),Object(u.jsx)(i.CurrencyIcon,{type:"primary"})]})]})]}):f?Object(u.jsx)(ht,{}):Object(u.jsx)(We,{fail:!1,request:!0})]})},er=r(119),tr=["children"];function rr(e){var t=e.children,r=Object(er.a)(e,tr),n=Object(O.c)((function(e){return e.user})),a=Object(m.h)(),s=q("refreshToken");switch(r.path){case"/profile":case"/profile/orders":case"/profile/orders/:id":return Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{render:function(e){var r=e.location;return s?t:Object(u.jsx)(m.a,{to:{pathname:"/login",state:{from:r}}})}}));case"/login":var c;return s?Object(u.jsx)(m.a,{to:(null===a||void 0===a||null===(c=a.state)||void 0===c?void 0:c.from)?a.state.from:{pathname:"/"}}):Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{children:t}));case"/register":return s?Object(u.jsx)(m.a,{to:{pathname:"/profile"}}):Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{children:t}));case"/forgot-password":return s?Object(u.jsx)(m.a,{to:{pathname:"/profile"}}):n.forgotPassword.success?Object(u.jsx)(m.a,{to:{pathname:"/reset-password"}}):Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{children:t}));case"/reset-password":return s?Object(u.jsx)(m.a,{to:{pathname:"/profile"}}):n.forgotPassword.success?n.resetPassword.success?Object(u.jsx)(m.a,{to:{pathname:"/login"}}):Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{children:t})):Object(u.jsx)(m.a,{to:{pathname:"/forgot-password"}});default:return Object(u.jsx)(m.b,Object(D.a)(Object(D.a)({},r),{},{children:t}))}}function nr(){var e=Object(m.h)(),t=Object(m.g)(),r=Object(O.c)((function(e){return e.order})).data,n=("PUSH"===t.action||"REPLACE"===t.action)&&(null===e||void 0===e?void 0:e.state)&&e.state.background;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(m.d,{location:n||e,children:[Object(u.jsx)(m.b,{path:"/",exact:!0,children:Object(u.jsx)(nt,{})}),Object(u.jsx)(m.b,{path:"/feed",exact:!0,children:Object(u.jsx)(Kt,{})}),Object(u.jsx)(m.b,{path:"/feed/:id",exact:!0,children:Object(u.jsx)(Yt,{})}),Object(u.jsx)(rr,{path:"/profile/orders/:id",exact:!0,children:Object(u.jsx)(Yt,{})}),Object(u.jsx)(rr,{path:"/login",exact:!0,children:Object(u.jsx)(ct,{})}),Object(u.jsx)(rr,{path:"/register",exact:!0,children:Object(u.jsx)(lt,{})}),Object(u.jsx)(rr,{path:"/forgot-password",exact:!0,children:Object(u.jsx)(jt,{})}),Object(u.jsx)(rr,{path:"/reset-password",exact:!0,children:Object(u.jsx)(mt,{})}),Object(u.jsx)(m.b,{path:"/ingredients/:id",exact:!0,children:Object(u.jsx)(vt,{})}),Object(u.jsx)(rr,{path:"/profile",children:Object(u.jsx)(Ht,{})}),Object(u.jsx)(m.b,{children:Object(u.jsx)(ht,{})})]}),n&&Object(u.jsx)(m.b,{path:"/ingredients/:id",children:Object(u.jsx)(fe,{children:Object(u.jsx)(xe,{})})}),n&&Object(u.jsx)(m.b,{path:"/feed/:id",children:Object(u.jsx)(fe,{children:Object(u.jsx)($t,{})})}),n&&Object(u.jsx)(rr,{path:"/profile/orders/:id",children:Object(u.jsx)(fe,{children:Object(u.jsx)($t,{})})}),r&&Object(u.jsx)(fe,{children:Object(u.jsx)(Se,{})})]})}var ar="GET_INGREDIENTS_REQUEST",sr="GET_INGREDIENTS_SUCCESS",cr="GET_INGREDIENTS_FAIL";var ir=function(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.ingredients})).items;return Object(n.useEffect)((function(){0===t.length&&e((function(e){return e({type:ar}),fetch("https://norma.nomoreparties.space/api/ingredients").then(P).then((function(t){t.success?e({type:sr,ingredients:t.data}):e({type:cr})})).catch((function(t){e({type:cr})}))}))}),[e,t.length]),Object(u.jsxs)(d.a,{basename:"/react-burger",children:[Object(u.jsx)(j,{}),Object(u.jsx)("div",{className:b.a.container,children:Object(u.jsx)(nr,{})})]})},or=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,218)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))},lr=r(118),dr=r(13),ur={ingredients:{items:[],ingredientsRequest:!1,ingredientsFailed:!1},burger:{bun:null,notBun:[]},order:{data:null,orderRequest:!1,orderRailed:!1},websocket:{orders:null,total:null,totalToday:null,wsConnected:!1,error:null},user:{data:null,login:{request:!1,failed:!1},logout:{request:!1,failed:!1},register:{request:!1,failed:!1},forgotPassword:{request:!1,success:!1},resetPassword:{request:!1,success:!1},getUserRequest:{request:!1,failed:!1},updateUserRequest:{request:!1,success:!1}}},jr=ur.ingredients,pr=ur.burger,br=ur.user,mr=ur.order,Or=Object(dr.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ar:return Object(D.a)(Object(D.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case sr:return{ingredientsFailed:!1,items:t.ingredients,ingredientsRequest:!1};case cr:return Object(D.a)(Object(D.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});default:return e}},burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return"bun"===t.item.type?Object(D.a)(Object(D.a)({},e),{},{bun:t.item}):Object(D.a)(Object(D.a)({},e),{},{notBun:[].concat(Object(Le.a)(e.notBun),[Object(D.a)(Object(D.a)({},t.item),{},{uniqueId:t.uniqueId})])});case k:return Object(D.a)(Object(D.a)({},e),{},{notBun:Object(Le.a)(e.notBun).filter((function(e){return e.uniqueId!==t.uniqueId}))});case R:return Object(D.a)(Object(D.a)({},e),{},{notBun:t.payload});case w:return ur.burger;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(D.a)(Object(D.a)({},e),{},{orderRequest:!0,orderRailed:!1});case je:return{data:t.order,orderRequest:!1,orderRailed:!1};case pe:return Object(D.a)(Object(D.a)({},e),{},{orderRequest:!1,orderRailed:!0});case be:return ur.order;default:return e}},websocket:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur.websocket,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case qt:return Object(D.a)(Object(D.a)({},t),{},{error:null,wsConnected:!0});case Lt:return Object(D.a)(Object(D.a)({},t),{},{error:null!==(e=r.payload)&&void 0!==e?e:"WebSocket error",wsConnected:!1});case Bt:return ur.websocket;case Ut:return Object(D.a)(Object(D.a)({},t),{},{error:null,orders:r.payload.orders,total:r.payload.total,totalToday:r.payload.totalToday});default:return t}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(D.a)(Object(D.a)({},e),{},{login:{request:!0,failed:!1}});case G:return Object(D.a)(Object(D.a)({},e),{},{data:t.user,login:{request:!1,failed:!1}});case H:return Object(D.a)(Object(D.a)({},e),{},{login:{request:!1,failed:!0}});case M:return Object(D.a)(Object(D.a)({},e),{},{logout:{request:!0,failed:!1}});case z:return ur.user;case Q:return Object(D.a)(Object(D.a)({},e),{},{logout:{request:!1,failed:!0}});case J:return Object(D.a)(Object(D.a)({},e),{},{register:{request:!0,failed:!1}});case Z:return Object(D.a)(Object(D.a)({},e),{},{data:t.user,register:{request:!1,failed:!1}});case K:return Object(D.a)(Object(D.a)({},e),{},{register:{request:!1,failed:!0}});case V:return Object(D.a)(Object(D.a)({},e),{},{forgotPassword:{request:!0,success:!1}});case X:return Object(D.a)(Object(D.a)({},e),{},{forgotPassword:{request:!1,success:!0}});case Y:return Object(D.a)(Object(D.a)({},e),{},{forgotPassword:{request:!1,success:!1}});case $:return Object(D.a)(Object(D.a)({},e),{},{resetPassword:{request:!0,success:!1}});case ee:return Object(D.a)(Object(D.a)({},e),{},{resetPassword:{request:!1,success:!0}});case te:return Object(D.a)(Object(D.a)({},e),{},{resetPassword:{request:!1,success:!1}});case re:return Object(D.a)(Object(D.a)({},e),{},{getUserRequest:{request:!0,failed:!1}});case ne:return Object(D.a)(Object(D.a)({},e),{},{data:t.user,getUserRequest:{request:!1,failed:!1}});case ae:return Object(D.a)(Object(D.a)({},e),{},{getUserRequest:{request:!1,failed:!0}});case se:return Object(D.a)(Object(D.a)({},e),{},{updateUserRequest:{request:!0,success:!1}});case ce:return Object(D.a)(Object(D.a)({},e),{},{data:t.user,updateUserRequest:{request:!1,success:!0}});case ie:return Object(D.a)(Object(D.a)({},e),{},{updateUserRequest:{request:!1,success:!1}});default:return e}}}),fr=r(50),_r=Object(lr.a)({reducer:Or,devTools:!1,middleware:[fr.a,function(e){var t=null;return function(r){return function(n){var a=e.dispatch;if(n.type===Ft){var s=q("accessToken").replace("Bearer ","");t=new WebSocket(n.payload.secure?"".concat(n.payload.url,"?token=").concat(s):n.payload.url)}t&&(t.onopen=function(e){a({type:qt,payload:e})},t.onerror=function(e){a({type:Lt,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t);a({type:Ut,payload:r})},t.onclose=function(e){a({type:Bt,payload:e})},n.type===At&&t.close(n.payload)),r(n)}}}],enhancers:[]});c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O.a,{store:_r,children:Object(u.jsx)(ir,{})})}),document.getElementById("root")),or()},23:function(e,t,r){e.exports={loginWrapper:"login_loginWrapper__gOlDc",loginContent:"login_loginContent__3ZyKD",formTitle:"login_formTitle__JOqYF",form:"login_form__2I1Va",inputWrapper:"login_inputWrapper__kW2q6",submitWrapper:"login_submitWrapper__ItTmf",paragraph:"login_paragraph__3lo0b",link:"login_link__1lLUp"}},25:function(e,t,r){e.exports={loginWrapper:"register_loginWrapper__1fW9t",loginContent:"register_loginContent__2qCE9",formTitle:"register_formTitle__3412N",form:"register_form__UZpiH",inputWrapper:"register_inputWrapper__2r1pu",submitWrapper:"register_submitWrapper__2t7Cu",paragraph:"register_paragraph__2Uui7",link:"register_link__PkZn9"}},26:function(e,t,r){e.exports={loginWrapper:"reset-password_loginWrapper__3I7XY",loginContent:"reset-password_loginContent__3LoVo",formTitle:"reset-password_formTitle__230sv",form:"reset-password_form__h7Y-h",inputWrapper:"reset-password_inputWrapper__3XGQL",submitWrapper:"reset-password_submitWrapper__399aj",paragraph:"reset-password_paragraph__1QMBP",link:"reset-password_link__3jPKI"}},27:function(e,t,r){e.exports={loginWrapper:"forgotPassword_loginWrapper__3GA2O",loginContent:"forgotPassword_loginContent__2Qnpr",formTitle:"forgotPassword_formTitle__1qBpR",form:"forgotPassword_form__1k7Ro",inputWrapper:"forgotPassword_inputWrapper__1g_uW",submitWrapper:"forgotPassword_submitWrapper__72h7N",paragraph:"forgotPassword_paragraph__Js7p-",link:"forgotPassword_link__IrGAX"}},28:function(e,t,r){e.exports={inputWrapper:"ProfileFormStyles_inputWrapper__35Q9K",submitWrapper:"ProfileFormStyles_submitWrapper__3XP3p",link:"ProfileFormStyles_link__QxOua",sidesWrapper:"ProfileFormStyles_sidesWrapper__3eB8-",leftSide:"ProfileFormStyles_leftSide__2pz5h",rightSide:"ProfileFormStyles_rightSide__3Jy0L"}},30:function(e,t,r){e.exports={profileMenu:"ProfileMenuStyles_profileMenu__162fl",profileLink:"ProfileMenuStyles_profileLink__13H_h",profileLinkActive:"ProfileMenuStyles_profileLinkActive__39uxq ProfileMenuStyles_profileLink__13H_h",info:"ProfileMenuStyles_info__1BK_f"}},34:function(e,t,r){e.exports={cart:"BurgerConstructorStyles_cart__ykOjH",cartEmpty:"BurgerConstructorStyles_cartEmpty__2_RSM",ingredients:"BurgerConstructorStyles_ingredients__3CI4a",checkout:"BurgerConstructorStyles_checkout__2fv9A",button:"BurgerConstructorStyles_button__rfpBw",total:"BurgerConstructorStyles_total__1ObGb",rightSidebar:"BurgerConstructorStyles_rightSidebar__1dOgs"}},35:function(e,t,r){e.exports={ordersTable:"OrdersStatStyles_ordersTable__h_0H6",completedOrders:"OrdersStatStyles_completedOrders__FYCe_",orderIds:"OrdersStatStyles_orderIds__2QIF0",ordersTotals:"OrdersStatStyles_ordersTotals__3wklf"}},40:function(e,t,r){e.exports={list:"BurgerIngredientsStyles_list__2aZfo",notification:"BurgerIngredientsStyles_notification__1b1BF",burgerBuilder:"BurgerIngredientsStyles_burgerBuilder__TJ-gZ"}},41:function(e,t,r){e.exports={content:"profile_content__1HIMP",column:"profile_column__1dmb5",centerBlock:"profile_centerBlock__TRN6n",sidebar:"profile_sidebar__3y_F4"}},51:function(e,t,r){e.exports={listItemPrice:"BurgerIngredientStyles_listItemPrice__2w4j6",listItemTitle:"BurgerIngredientStyles_listItemTitle__tyY6n",listItemContent:"BurgerIngredientStyles_listItemContent__4yuBB",listItem:"BurgerIngredientStyles_listItem__1ujWA"}},58:function(e,t,r){e.exports={orderId:"OrderCreatedStyles_orderId__2RDrj",orderDetails:"OrderCreatedStyles_orderDetails__13Rw4",iconWrapper:"OrderCreatedStyles_iconWrapper__1VXl6"}},59:function(e,t,r){e.exports={section:"LoadingStyles_section__1Z3ZN",loadingGif:"LoadingStyles_loadingGif__16viY",error:"LoadingStyles_error__3-E9h"}},80:function(e,t,r){e.exports={modal:"ModalStyles_modal__za-hS",closeButton:"ModalStyles_closeButton__1dApL",headingWrapper:"ModalStyles_headingWrapper__qo87D"}},81:function(e,t,r){e.exports={ingredientDetails:"IngredientDetailsStyles_ingredientDetails__1bN37",nutritionalValues:"IngredientDetailsStyles_nutritionalValues__1Vb_P"}},84:function(e,t,r){e.exports={paragraph:"notFound_paragraph__5Nsua",content:"notFound_content__3T972"}},85:function(e,t,r){e.exports={content:"feedStyles_content__3prTg",ordersFeed:"feedStyles_ordersFeed__3WIX-"}}},[[210,1,2]]]);
//# sourceMappingURL=main.eca173ee.chunk.js.map